{% load staticfiles %}
{% load index %}
{% load get_item %}
<html>
    <head>
        <title>2016中国十佳劳伦斯冠军奖</title>
        <!--[if lte IE 8]>
            <script src="{% static 'js/excanvas.js' %}"></script>
        <![endif]-->
        <link rel="icon" href="{% static 'images/favicon.ico' %}">
        <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
        <link href="{% static 'css/dashboard.css' %}" rel="stylesheet">
    </head>

    <body style="padding-top: 0px">
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-3 col-md-2 sidebar" style="top:0">
                    <ul class="nav nav-sidebar">
                        {% for voting_item in voting_items %}
                            <li><a href="#voting_item{{ forloop.counter0 }}">{{ voting_item }}</a></li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="col-sm-9 col-sm-offset-3 col-md-10 col-sm-offset-2 main">
                    <h1>
                        2016中国十佳劳伦斯冠军奖 投票趋势!
                        <small href="http://survey.sports.sina.com.cn/result/115601.html">(source)</small>
                    </h1>
                    {% for voting_item in voting_items %}
                        <hr>
                        <h4 href="javascript:;" id="voting_item{{ forloop.counter0 }}">{{ voting_item }}</h4>
                        <canvas id="myChart{{ forloop.counter0 }}"></canvas>
                    {% endfor %}
                </div>
            </div>
        </div>



        <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
        {% for voting_item in voting_items %}
        <script type="text/javascript">
            var ctx = $("#myChart{{ forloop.counter0 }}").get(0).getContext("2d");
            var chart_data = {
                labels: {{ labels|safe }},
                datasets: [
                    {% for person in persons|index:forloop.counter0 %}
                    {
                        label: '{{ person }}',
                        fill: false,
                        lineTension: 0.1,
                        backgroundColor: "rgba({{ colors|index:forloop.counter0 }},0.4)",
                        borderColor: "rgba({{ colors|index:forloop.counter0 }},1)",
                        borderCapStyle: 'butt',
                        borderDashOffset: 0.0,
                        borderJoinStyle: 'miter',
                        pointBorderColor: "rgba({{ colors|index:forloop.counter0 }},1)",
                        pointBackgroundColor: "#fff",
                        pointBorderWidth: 1,
                        pointHoverRadius: 5,
                        pointHoverBackgroundColor: "rgba({{ colors|index:forloop.counter0 }},1)",
                        pointHoverBorderColor: "rgba(220,220,220,1)",
                        pointHoverBorderWidth: 2,
                        pointRadius: 1,
                        pointHitRadius: 10,
                        data: {{ final_result|get_item:voting_item|get_item:person }},
                        spanGaps: false,
                    },
                    {% endfor %}
                ]
            };

            new Chart(ctx, {
                type: 'line',
                data: chart_data,
                options: {
                    responsive: true
                }
            });

        </script>
        {% endfor %}

    </body>
</html>